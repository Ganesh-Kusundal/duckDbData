# Environment Setup

This project uses an automated conda environment setup that works across all shells and tools.

## What's Configured

✅ **Local Conda Environment**: `.conda/` folder contains the project's Python environment (Python 3.11)
✅ **Direnv Auto-Activation**: Automatic environment activation when entering the project directory
✅ **Zsh Hook Fallback**: Zsh-specific auto-activation as backup
✅ **Cross-Shell Compatibility**: Works in Terminal, iTerm, VS Code, tmux, SSH
✅ **AI Agent Compatible**: Works with automation tools and scripts

## How It Works

### Primary Method (Direnv)
- **Automatic**: When you `cd` into this directory, the conda environment activates
- **Shell-agnostic**: Works with zsh, bash, and other shells
- **Secure**: Requires explicit approval of `.envrc` file

### Fallback Method (Zsh Hook)
- **Zsh-only**: Uses `.auto-conda` marker file for auto-activation
- **No dependencies**: Works without direnv
- **Directory-aware**: Activates/deactivates on directory change

## Usage

### For Interactive Work
```bash
cd ~/Downloads/duckDbData
# Environment auto-activates via direnv or zsh hook
python your_script.py
```

### For AI Agents/Automation
```bash
# Use direnv exec for guaranteed environment
direnv exec ~/Downloads/duckDbData python backtesting/breakout_backtest.py

# Or use the convenience script
bin/run python backtesting/breakout_backtest.py
```

### Opening Terminal in Project
```bash
# Use the convenience script
bin/open-terminal

# Or manually
open -a Terminal ~/Downloads/duckDbData
open -a iTerm ~/Downloads/duckDbData
```

## Environment Variables Set

- `LOG_DIR`: Points to `$(pwd)/.logs`
- `PYTHONPATH`: Includes the project root
- `CONDA_PREFIX`: Points to the local `.conda` environment

## Files Overview

- `.envrc`: Direnv configuration for auto-activation
- `.auto-conda`: Marker file for zsh hook (contains `./.conda`)
- `.conda/`: Local conda environment (self-contained)
- `bin/run`: Convenience script for non-interactive execution
- `bin/open-terminal`: Script to open Terminal/iTerm in project directory

## Troubleshooting

### If direnv blocks .envrc
```bash
cd ~/Downloads/duckDbData
direnv allow
```

### If conda environment doesn't activate
```bash
# Check conda is available
conda info --base

# Manual activation
conda activate ././.conda
```

### For VS Code
- The environment should auto-activate in integrated terminal
- If not, restart VS Code or run `direnv allow` in the project directory

## Portability

The local `.conda` environment makes this setup completely portable:
- Copy the entire project folder to any machine
- The environment travels with the code
- No need to recreate environments on different machines
